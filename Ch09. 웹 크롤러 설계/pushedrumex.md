# Ch09. 웹 크롤러 설계

### bfs 를 사용하는 웹 크롤러일 경우 어떤 문제점이 있나요?

* bfs 를 사용할 경우 높은 확률로 동일한 서버에 요청을 많이 보내게 되는데, 어떻게 해결할 수 있을까요?
* 일반 bfs 일 경우 URL 의 우선순위를 두지 않는데, 우선순위를 고려하여 크롤링하는 방법에는 어떤 것이 있을까요?

<details>
<summary><h4>해설</h4></summary>

> bfs 를 사용하는 웹 크롤러일 경우 어떤 문제점이 있나요?
* 한 페이지에서 나오는 링크는 대부분 같은 서버로 요청하게 되는데 이 경우 특정 서버에 과부하 요청이 걸릴 수 있다는 문제점이 있습니다.

> bfs 를 사용할 경우 높은 확률로 동일한 서버에 요청을 많이 보내게 되는데, 어떻게 해결할 수 있을까요?
* 각 호스트 별로 큐를 만들고 해당 큐를 담당하는 스레드를 만들어서 한번에 한 서버에 요청을 하도록 할 수 있습니다.

> 일반 bfs 일 경우 URL 의 우선순위를 두지 않는데, 우선순위를 고려하여 크롤링하는 방법에는 어떤 것이 있을까요?
* 우선순위 별로 큐를 두고 순위가 높은 큐에서 자주 꺼내는 프로그래밍이 된 큐선택기를 사용하여 해결할 수 있습니다.
</details>


<br>


### 크롤링 서버를 최적화하는 방법에는 어떤것이 있을까요?

* 다운로드 서버를 여러개 두었을 때 크롤링 작업을 어떻게 분산할 수 있을까요?
* DNS 조회 결과를 캐싱한다면, IP가 바뀔 수도 있는데 어떻게 대처할 수 있을까요?

<details>
<summary><h4>해설</h4></summary>

> 크롤링 서버를 최적화하는 방법에는 어떤것이 있을까요?
* 다운로드 서버를 여러개 두어 크롤링 작업을 여러 서버에 분산할 수 있습니다. 또한, DNS 조회 결과를 캐싱하여 IP 주소를 찾는 과정을 줄일 수 있습니다.

> 다운로드 서버를 여러개 두었을 때 크롤링 작업을 어떻게 분산할 수 있을까요?
* 안정해시 방법을 사용하여 URL 을 해싱하여 분산할 수 있습니다.

> DNS 조회 결과를 캐싱한다면, IP가 바뀔 수도 있는데 어떻게 대처할 수 있을까요?
* 크론잡을 돌려 주기적으로 IP 주소를 갱신할 수 있습니다.
</details>


