# Ch05. 안정 해시 설계

### 안정 해시는 무엇이고, 기존 해시에 비해 안정 해시가 가진 장점은 무엇인가?

* 안정 해시 알고리즘의 절차를 간단히 소개하시오.
  
<details>
<summary><h4>해설</h4></summary>

> 안정 해시는 무엇이고, 기존 해시에 비해 안정 해시가 가진 장점은 무엇인가?
* 안정 해시는 해시 테이블 크기가 조정될 때 평균적으로 오직 k/n 개의 키만 재배치하는 해시 기술이다. (k=키의 개수, n=슬롯 개수)
* 기존 해시는 슬롯의 수가 바뀌면 거의 대부분의 키를 재배치하므로 안정 해시는 보다 안정적으로 사용할 수 있다.
* 또한 데이터가 더 균등하게 분포하므로 수평적 규모 확장성을 달성하기 쉽고, 핫스팟 문제가 발생할 확률이 줄어든다.

> 안정 해시 알고리즘의 절차를 간단히 소개하시오.
* 서버와 키를 균등 분포 해시 함수를 사용해 해시 링에 배치한다.
* 키의 위치에서 링을 시계 방향으로 탐색하다 만나는 최초의 서버가 키가 저장될 서버다.
</details>


<br>

### 기본 안정 해시 알고리즘의 문제점은 무엇인가?

* 위 문제점을 해결하거나 보완할 방법이 있다면 설명하시오.

<details>
<summary><h4>해설</h4></summary>

> 기본 안정 해시 알고리즘의 문제점은 무엇인가?
* 서버가 추가되거나 삭제되는 상황을 감안하면 파티션의 크기를 균등하게 유지하는 게 불가능하다.
* 키의 균등 분포를 달성하기 어렵다.

> 위 문제점을 해결하거나 보완할 방법이 있다면 설명하시오.
* 가상 노드 또는 복제 기법을 사용할 수 있다.
* 가상 노드는 실제 노드 또는 서버를 가리키는 노드로써, 하나의 서버는 링 위에 여러 개의 가상 노드를 가질 수 있다.
* 따라서 각 서버는 여러 개의 파티션을 관리한다.
* 이후 기존과 같이 키의 위치로부터 시계방향으로 링을 탐색하다 만나는 최초의 가상 노드가 해당 키가 저장될 서버가 된다.
* 이 때 가상 노드의 개수가 늘어날 수록 키의 분포는 더 균등해진다.
* 표준 편차가 작아져서 데이터가 고르게 분포되기 때문이다.
* (하지만 늘어날 수록 가상 노드 데이터를 저장할 공간이 많이 필요하므로 트레이드 오프가 필요하다.)
</details>
