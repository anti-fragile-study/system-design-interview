# Ch06. 키-값 저장소 설계

### 데이터 일관성과 가용성, 파티션 감내란 무엇인가?

* CAP 이론이란 무엇인가?
* 하나의 마스터 노드와 두 개의 슬레이브 노드로 구성된 데이터베이스 시스템에서, 마스터 노드에 네트워크 장애가 발생하였다. 이때 가용성을 포기하고 데이터 일관성을 충족하고 싶다면 어떻게 대처해야 하는가?

<details>
<summary><h4>해설</h4></summary>

> 데이터 일관성과 가용성, 파티션 감내란 무엇인가?
* 데이터 일관성은 분산 시스템에서 어떤 서버에 접속하더라도 언제나 같은 데이터를 얻을 수 있음을 의미한다
* 가용성은 분산 시스템에서 특정 서버에 장애가 발생하더라도 항상 응답을 받을 수 있음을 의미한다
* 파티션 감내란 분산 시스템에서 서버 간 네트워크 장애가 발생하더라도 시스템은 계속해서 동작해야 함을 의미한다

> CAP 이론이란 무엇인가?
* 데이터 일관성, 가용성, 파티션 감내 중 두 가지를 충족하려면 나머지 하나는 반드시 희생되어야 한다는 이론이다

> 하나의 마스터 노드와 두 개의 슬레이브 노드로 구성된 데이터베이스 시스템에서, 마스터 노드에 네트워크 장애가 발생하였다. 이때 가용성을 포기하고 데이터 일관성을 충족하고 싶다면 어떻게 대처해야 하는가?
* 두 개의 슬레이브 노드 중 하나를 선택해 마스터 노드로 승격한다. 마스터 노드를 선출하는 동안에는 쓰기 연산을 제한한다.
</details>


<br>

### 여러 노드에 다중화된 데이터에 대해, 읽기와 쓰기 연산 모두 일관성을 보장하는 방식에는 무엇이 있는가?

* 일관성 모델에는 어떤 종류의 일관성이 있는가?
* 데이터의 비 일관성을 해소하는 방안에는 무엇이 있는가?

<details>
<summary><h4>해설</h4></summary>

> 여러 노드에 다중화된 데이터에 대해, 읽기와 쓰기 연산 모두 일관성을 보장하는 방식에는 무엇이 있는가?
* 합의 알고리즘을 사용할 수 있다. 읽기와 쓰기 연산을 수행할 때 다른 노드들로부터 최소 개수 이상의 합의를 받아야만 연산을 성공 처리한다

> 일관성 모델에는 어떤 종류의 일관성이 있는가?
* 강한 일관성 - 모든 읽기 연산이 항상 최신 데이터를 반환한다
* 약한 일관성 - 읽기 연산은 최신 데이터를 반환하지 못할 수 있다
* 결과적 일관성 - 약한 일관성의 한 형태로, 갱신 결과가 결국에는 모든 사본에 반영된다. 만약 일관성이 깨진다면 해당 문제는 클라이언트가 해결해야 한다

> 서버 A와 B는 복제된 데이터를 관리하고 았다. 만약 A와 B에 쓰기 요청이 동시에 발생해 충돌이 발생한 경우, 이를 감지할 수 있는 방법에는 무엇이 있는가?
* 데이터를 변경할 때마다 변경을 수행한 서버와 새로운 버전 정보를 생성하여 관리한다.
* 서로 다른 서버에서 동시 연산을 수행해 데이터가 충돌할 경우, 벡터 시계에 기록된 버전 정보로 충돌을 감지할 수 있다. 이를 해결하는 것은 클라이언트에 위임한다.
</details>
