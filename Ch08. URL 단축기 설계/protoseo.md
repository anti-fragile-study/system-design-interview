# Ch08. URL 단축키 설계

> Http 상태 코드는 크게 5개의 그룹으로 나눌 수 있는데, 각 그룹이 무슨 역할을 하는지 설명해주세요.

* Http 상태코드 중 리다이렉트를 담당하는 300번대에서, 301 Permantly Moved와 302 Found의 동작의 관점에서 차이에 대해 설명해주세요.
* 그렇다면 301 상태코드와 302 상태코드는 각각 어떤 상황에서 사용하는 것이 좋을지 예시를 들어주실 수 있나요?

<details>
<summary><h4>해설</h4></summary>

> Http 상태 코드는 크게 5개의 그룹으로 나눌 수 있는데, 각 그룹이 무슨 역할을 하는지 설명해주세요.
* 100번대 상태 코드는 주로 정보를 제공하고, 200번대 상태 코드는 성공적인 응답을 제공하는 상태코드이다. 300번대는 리다이렉트를, 400번대는 클라이언트 오류를 500번대는 서버 오류를 의미하는 역할을 한다.

> Http 상태코드 중 리다이렉트를 담당하는 300번대에서, 301 Permanently Moved 와 302 Found 의 동작의 관점에서 차이에 대해 설명해주세요.
* 301 Permanently Moved 는 해당 URL에 대한 HTTP 요청의 처리 책임이 영구적으로 Location 헤더에 반환된 URL로 이전되었다는 의미다. 영구적으로 이전되었으므로 브라우저는 이 응답을 캐시한다. 이후 브라우저는 같은 URL에 대해 캐시된 원래 URL로 요청을 보낸다.
* 302 Found 는 주어진 URL로의 요청이 일시적으로 Location 헤더가 지정하는 URL에 의해 처리되어야 한다는 응답이다. 항상 요청을 보내서 원래 URL을 받아 리디렉션 된다.

> 그렇다면 301 상태코드와 302 상태코드는 각각 어떤 상황에서 사용하는 것이 좋을지 예시를 들어주실 수 있나요?
* 서버 부하를 줄이는 것에 목적을 둔다면, 301 상태코드를 사용하여 원래 주소를 브라우저가 캐시하도록 할 수 있다. 
* 만약 트래픽 분석이 중요한 경우, 302 상태코드를 사용해서 트래픽을 추적하는데 좀 더 유리하다.

</details>
<br>

> 우리는 유명한 블로그 서비스를 운영하고 있습니다. 사용자들의 요청에 의해서 각 블로그 글에 단축 URL을 제공하려고 할 때, 적당한 단축 URL의 길이를 계산해주세요.
> 
> ```text
> - 단축 URL은 영문 소문자, 대문자와 숫자로 구성될 수 있습니다.
> - 단축 URL은 원래 블로그 글의 URL을 해싱해서 생성할 예정입니다.
> - 이미 데이터베이스에는 10억개의 글이 작성되어 저장되어 운용되고 있습니다.
> - 새로 작성되는 글에도 단축 URL을 제공해야 합니다.
> - 매일 100만개의 글이 작성됩니다.
> - 최소 10년 동안 이 블로그 서비스가 운영될 가능성이 있다고 가정하고 계산해주세요.
> - 저장공간은 충분하다고 생각하고 계산해주세요.
> ```

* 단축 URL을 생성하기 위해 사용할 수 있는 해시 함수 구현 기술에 대해 어떤 방법들이 있는지 알려주실 수 있나요?
* 해시 후 충돌 해소 방법의 동작 방법과 특징에 대해서 설명해주세요.

<details>
<summary><h4>해설</h4></summary>

> 우리는 유명한 블로그 서비스를 운영하고 있습니다. 사용자들의 요청에 의해서 각 블로그 글에 단축 URL을 제공하려고 할 때, 적당한 단축 URL의 길이를 계산해주세요.
* 단축 URL은 영문 소문자, 대문자와 숫자로 구성되므로 총 사용할 수 있는 문자의 개수는 62개이다.
* 총 저장될 가능성이 있는 글의 개수를 계산해보면, 현재 1,000,000,000개의 글과 미래에 작성될 가능성이 있는 1,000,000 * 365 * 10 개의 글이 있다.
* 총 4,650,000,000 개의 글이 저장될 수 있다.
* 이를 62개의 문자열로 표현하기 위해서 계산해보면 4,650,000,000 < `62 ^ 6` = 56,800,235,584, 즉 6자리의 단축 URL이 필요하다.

> 단축 URL을 생성하기 위해 사용할 수 있는 해시 함수 구현 기술에 대해 어떤 방법들이 있는지 알려주실 수 있나요?
* 해시 후 충돌 해소 방법과 base-62 변환 방법이 있습니다.

> 해시 후 충돌 해소 방법의 동작 방법과 특징에 대해서 설명해주세요.
* 잘 알려진 해시 함수에 원래 블로그 글의 URL을 넣어서 나온 해시 값을 원하는 길이로 잘라서 단축된 URL을 만든다. 해당 값이 이미 DB에 있는지 확인해서 기존 URL에 사전에 정한 문자열을 추가하고 다시 해시를 하는 것을 반복한다.
* 이때, 데이터베이스에 계속 질의를 해야하므로 오버헤드가 크기 때문에 데이터베이스 대신 블룸필터를 사용할 수 있다.

</details>
