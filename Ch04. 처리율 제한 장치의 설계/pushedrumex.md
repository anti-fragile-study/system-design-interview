# Ch04. 처리율 제한 장치의 설계

### 처리율 제한장치가 무엇인지 설명해주세요.

* API 요청에 처리율 제한장치를 두면 어떤 장점이 있을까요?

<details>
<summary><h4>해설</h4></summary>

> 처리율 제한장치가 무엇인지 설명해주세요.
* 클라이언트 또는 서비스가 보내는 트래픽의 처리율을 제어하기 위한 장치입니다.

> API 요청에 처리율 제한장치를 두면 어떤 장점이 있을까요?
* Dos 공격에 대한 방어가 가능하고 서버와 제 3자 서비스 비용을 절감할 수 있습니다.
* 
</details>


<br>

### 레디스에 카운트 값을 저장하여 처리율 제한장치를 구현했을때 발생할 수 있는 문제점이 무엇이 있을까요?

* 동시성 문제가 발생했다면 어떻게 해결할 수 있을까요?

<details>
<summary><h4>해설</h4></summary>

> 레디스에 카운트 값을 저장하여 처리율 제한장치를 구현했을때 발생할 수 있는 문제점이 무엇이 있을까요?
* 분산환경일 경우, 동시성 문제가 발생할 수 있습니다.

> 동시성 문제가 발생했다면 어떻게 해결할 수 있을까요?
* sorted set 을 사용하여 해결할 수 있습니다. 추적 대상을 key로 하여 sorted set 을 추적 대상 별로 생성하고, 요청이 발생할 경우 TTL 을 설정하여 시간 순으로 sorted set 에 저장한 후, sorted set 크기가 임계값 이하라면 해당 요청을 API 서버에 전달하면 동시성 문제를 해결할 수 있습니다.

</details>
