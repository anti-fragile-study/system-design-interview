# Ch13. 검색어 자동완성 시스템

### 사용자가 단어를 입력하면 연관 검색어를 추천해줘야 한다. 연관 검색어는 이전 검색 빈도를 기반으로 선정할 때, 어떻게 추천 데이터를 생성할 수 있겠는가?

* 트라이 자료 구조란 무엇인가?
* 검색 시스템에 트라이 구조를 적용해 검색 효율을 개선해 보시오.

<details>
<summary><h4>해설</h4></summary>

> 사용자가 단어를 입력하면 연관 검색어를 추천해줘야 한다. 연관 검색어는 이전 검색 빈도를 기반으로 선정할 때, 어떻게 추천 데이터를 생성할 수 있겠는가?
* 사용자가 단어를 검색할 때마다 서버에서는 해당 단어의 검색 빈도를 기록한다. 이후 사용자의 검색어 질의 요청이 들어오면 SQL의 `like` 연산을 사용해 검색 후, 검색 빈도로 정렬해 상위 x개의 데이터를 제공할 수 있다.

> 트라이 자료구조란 무엇인가?
* 문자열 검색에 특화된 트리형 자료구조이다. 루트 노드에는 빈 문자열을 두고, 각 자식 노드에는 한 글자씩 저장하기 때문에 각 노드는 최대 26개의 자식 노드를 가질 수 있다. 
* 트리 노드를 dfs 방식으로 탐색하여 특정 문자열이 존재하는지 빠르게 찾아낼 수 있다. 

> 검색 시스템에 트라이 구조를 적용해 검색 효율을 개선해 보시오.
* 검색 시스템에서는 빈도 값에 따라 정렬이 필요하기 때문에 트라이 노드에 문자와 검색 빈도를 함께 저장한다.
* 검색어가 들어오면 이에 해당하는 노드를 찾는다. 이후 유효한 모든 자식 노드를 찾아 정렬 하고 검색 빈도가 높은 x 개의 문자를 반환한다.
</details>


<br>

### 검색 시스템에 트라이를 사용할 때 최악의 경우 모든 트리를 다 검색할 수도 있다. 이를 방지할 수 있는 방법에는 무엇이 있는가?

* 사용자가 검색창에 글자를 타이핑할 때마다 실시간으로 트라이에 반영하면 서비스가 느려질 것이다. 적절한 대안은 없는가?
* 프론트엔드 측면에서 질의 검색 서비스의 효율을 높일 수 있는 방법은 무엇이 있는가?

<details>
<summary><h4>해설</h4></summary>

> 검색 시스템에 트라이를 사용할 때 최악의 경우 모든 트리를 다 검색할 수도 있다. 이를 방지할 수 있는 방법에는 무엇이 있는가?
* 각 노드별로 상위 x 개의 인기 검색어를 캐싱할 수 있다. 인기 검색어를 캐싱하면, 이후 자식 노드들을 모두 탐색해 정렬할 필요가 없어진다.

> 사용자가 검색창에 글자를 타이핑할 때마다 실시간으로 트라이에 반영하면 서비스가 느려질 것이다. 적절한 대안은 없는가?
* 사용자 검색 입력이 들어오면 이를 로그에 기록한다. 기록된 로그를 실시간으로 트라이에 반영하지 않고, 일정 주기마다 로그 데이터를 가공해 시스템에 반영한다.

> 프론트엔드 측면에서 질의 검색 서비스의 효율을 높일 수 있는 방법은 무엇이 있는가?
* AJAX 방식을 사용해 페이지 전체를 새로고침 하지 않고 필요한 데이터만 다시 렌더링 할 수 있다.
* 검색 결과는 자주 바뀌는 값이 아니기 때문에 브라우저 캐시 저장소를 사용해 검색된 결과를 저장해놓는다. 
</details>
