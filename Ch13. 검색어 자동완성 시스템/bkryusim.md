# Ch13. 검색어 자동완성 시스템

### trie를 활용해 인기 검색어를 추출하는 알고리즘을 설명해 주세요

* 자칫 전체 trie를 모두 검색해야 하는 성능 문제가 발생할 수 있는데, 어떻게 해결할 수 있을까요?

<details>
<summary><h4>해설</h4></summary>

> trie를 활용해 K개의 인기 검색어를 추출하는 알고리즘을 설명해 주세요
* 접두어를 입력받으면
* 해당 접두어에 해당하는 노드를 찾습니다.
* 해당 노드의 하위 노드를 모두 탐색하여 모든 유효 노드를 찾습니다.
* 이후 유효 노드를 정렬하여 가장 인기있는 K개의 검색어를 추출합니다.

> 자칫 전체 trie를 모두 검색해야 하는 성능 문제가 발생할 수 있는데, 어떻게 해결할 수 있을까요?
* 접두어의 최대 길이를 제한합니다. 사용자가 긴 단어를 입력하는 일은 별로 없기에, 접두어 최대 길이를 제한하면 트리 탐색 시간을 줄일 수 있습니다.
* 그리고 노드마다 인기 검색어를 캐싱합니다. 그러면 하위 노드를 탐색하는 시간을 줄여 탐색 시간을 크게 낮출 수 있습니다.

</details>


<br>

### 사용자가 타이핑할 때 마다 데이터를 수집하면 어떤 문제가 있을까요?

* 데이터 갱신 주기를 3일 정도라고 할 때, 데이터 갱신 시스템을 설계해 주세요.
* 키 값 저장소에 트라이 자료구조를 저장하는 방법을 제시해 주세요.

<details>
<summary><h4>해설</h4></summary>

> 사용자가 타이핑할 때 마다 데이터를 수집하면 어떤 문제가 있을까요?
* 타이핑으로 인한 트래픽이 많이 발생할텐데, 그 때마다 트라이를 수정하면 성능문제가 크게 발생한다.
* 데이터가 그만큼 자주 바뀌는 것에 대한 실용적 고민을 해야 한다.

> 데이터 갱신 주기를 3일 정도라고 할 때, 데이터 갱신 시스템을 설계해 주세요.
* 검색 데이터를 로그의 형태로 쌓아 둡니다.
* 3일에 한 번 작업 서버에서 로그를 분석하여 트라이 구조로 만듭니다.
* 생성된 트라이는 키-값 캐시에 저장합니다.
* DB 저장 시에는 document store 또는 key-value 저장소를 이용해 저장할 수 있습니다.

> 키 값 저장소에 트라이 자료구조를 저장하는 방법을 제시해 주세요.
* 각 트라이 노드의 접두어를 key로, 노드의 값(캐싱된 인기 검색어 등)들을 모두 value로 두어 관리합니다.
</details>
