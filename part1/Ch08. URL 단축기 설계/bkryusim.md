# Ch08. URL 단축기 설계

### HTTP 301과 302 응답의 차이를 설명해 주세요.

* SEO 시 어떤 차이가 있을까요?

<details>
<summary><h4>해설</h4></summary>

> HTTP 301과 302 응답의 차이를 설명해 주세요.
* 301은 Permanently Moved로, 브라우저는 이 응답을 캐시하여 다음에 같은 요청을 보낼 때 캐시된 다음 주소로 보내게 됩니다.
* 302는 Found로, 일시적으로 이동했다고 판단하여 응답을 캐시하지 않고, 언제나 원래 URL로 요청합니다.

> SEO 시 어떤 차이가 있을까요?
* 검색엔진 크롤러가 301을 만나면, 원래 URL의 서비스가 완전히 이동했다고 판단하여, 원래 URL의 페이지 랭킹과 평가 점수를 새로운 URL로 이동합니다.
* 반면 302의 경우 그대로 유지하지만, 무의미하게 사용하는 경우 악성 광고로 판단해 패널티가 부여될 수 있습니다.

</details>

<br>

### URL 단축기에서 접속 데이터 분석 솔루션을 제공하려고 합니다. 시스템 설계시 고려할 만한 사항들이 있을까요?

* 사용자 접속 데이터를 수집하고 저장하기 위한 시스템을 설계해 주세요.

<details>
<summary><h4>해설</h4></summary>

> URL 단축기에서 접속 데이터 분석 솔루션을 제공하려고 합니다. 시스템 설계시 고려할 만한 사항들이 있을까요?
* URL단축기의 가장 중요한 점은 사용자를 항상 오류없이 빠르게 리다이렉션을 시켜주는 것입니다.
* 사용자가 들어왔다는 정보를 동기적으로 DB에 기록하고, 트랜잭션이 끝나고 응답하면 지연시간이 길어지고, 통계 DB의 문제로 원래 서비스에 장애가 발생할 수 있습니다. 때문에 데이터 일관성보다 가용성을 선택하여 설계해야 합니다.

> 사용자 접속 데이터를 수집하고 저장하기 위한 시스템을 설계해 주세요.
* 낮은 지연시간과 높은 가용성을 위해, 메시지가 조금 누락되더라도, 비동기적으로 이벤트를 메시징 큐에 발행하고, 통계 서버가 subscribe 하여 수집하는 방식을 제안합니다.
* 또한 302 응답을 반환하여 브라우저 캐시를 막고, 항상 우리 서버에서 데이터를 수집하도록 합니다.
</details>
