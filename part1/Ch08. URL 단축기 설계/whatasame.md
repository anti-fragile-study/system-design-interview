# Ch08. URL 단축기 설계

### URL 단축기 서버에서 GET 매핑으로 origin URL을 제공할 때 HTTP 응답 코드를 301 혹은 302로 설정할 때 차이는 무엇인가요?

* 두 방식의 장단점은 무엇인가요?
* Redirect 상태 코드에서 가장 중요한 헤더에 대해 설명해주세요.

<details>
<summary><h4>해설</h4></summary>

> URL 단축기 서버에서 GET 매핑으로 origin URL을 제공할 때 HTTP 응답 코드를 301 혹은 302로 설정할 때 차이는 무엇인가요?
* 301과 302 모두 Redirect 상태 코드입니다. 
* 그러나 301은 영구적인 리다이렉트를 의미하기 때문에 브라우저는 응답을 캐싱하여 다음 short URL 요청시 바로 origin URL로 리다이렉트합니다.
* 302는 임시 리다이렉트를 의미하며, 브라우저는 응답을 캐싱하지 않기 때문에 short URL 요청시마다 URL 단축기 서버에 GET 요청을 보내 origin URL로 리다이렉트합니다.

> 두 방식의 장단점은 무엇인가요?
* 301의 경우 브라우저 캐싱으로 인해 origin URL을 얻기 위한 GET 요청을 줄일 수 있어 URL 단축기 서버의 부하가 줄어듭니다. 그러나 사용자의 요청을 추적하기 어렵고 매핑된 origin URL을 변경하기 어렵습니다.
* 302의 경우 short URL을 사용하는 사용자의 요청을 매번 추적할 수 있어 데이터 분석에 용이합니다. 그러나 매번 origin URL을 얻기 위한 GET 요청을 보내기 때문에 URL 단축기 서버의 부하가 높아집니다.

> Redirect 상태 코드에서 가장 중요한 헤더에 대해 설명해주세요.
* Redirect 상태 코드에서 가장 중요한 헤더는 `Location` 헤더입니다. 이 헤더는 리다이렉트할 URL을 포함하고 있으며, 브라우저는 이 헤더를 통해 리다이렉트할 URL을 얻습니다.

</details>


<br>

### URL을 단축할 때 사용할 수 있는 전략은 무엇이 있나요?

* 해시 후 충돌 해소 알고리즘에서 URL 길이를 고정된 길이로 축소하는 방법은 무엇인가요?
* 반대로 해시의 결과가 원하는 길이보다 짧을 경우 어떻게 늘릴 수 있을까요?

<details>
<summary><h4>해설</h4></summary>

> URL을 단축할 때 사용할 수 있는 전략은 무엇이 있나요?
* 해시 후 충돌 해소 알고리즘과 base62 인코딩 변환이 있습니다.

> 해시 후 충돌 해소 알고리즘에서 URL 길이를 고정된 길이로 축소하거나 늘리는 방법은 무엇인가요?
* 해시 결과의 앞 n자리를 잘라내어 사용합니다. 이때, 잘라낸 값에서 해시 충돌이 발생하는 경우 origin URL에 suffix를 추가하여 재해싱합니다.

> 반대로 해시의 결과가 원하는 길이보다 짧을 경우 어떻게 늘릴 수 있을까요?
* 해시 체인을 사용하여 해시 결과를 연결합니다. 이때, 원하는 길이보다 길다면 앞에서 언급한 방식대로 해시 결과의 앞 n자리를 사용합니다.
</details>
