# Ch14. 유튜브 설계

> 비디오 트랜스코딩에 대해서 설명해주실 수 있나요?

* 업로더가 올린 비디오 원본을 시청자에게 보여주도록 할 수도 있을 것 같은데, 트랜스코딩을 하는 이유는 무엇일까요?
* 현재 우리가 가지고 있는 서버가 CPU 성능이 좋은 대신 RAM이 부족한 서버와 CPU 성능이 부족한 대신 RAM이 많은 서버 두 종류가 있을때, 트랜스코딩 서버로 어떤 서버가 적합할지, 그리고 그 선택에 대한 이유를 알려주세요.

<details>
<summary><h4>해설</h4></summary>

> 비디오 트랜스코딩에 대해서 설명해주실 수 있나요?
* 비디오 트랜스코딩은 비디오 인코딩이라 부르기도 하는 절차로, 비디오의 포맷을 변환하는 절차다. 단말이나 대역폭 요구사항에 맞는 최적의 비디오 스트림을 제공하기 위해 필요하다.

> 업로더가 올린 비디오 원본을 시청자에게 보여주도록 할 수도 있을 것 같은데, 트랜스코딩을 하는 이유는 무엇일까요?
* 상당수의 단말과 브라우저는 특정 종류의 비디오 포맷을 지원하므로, 호환성 문제를 해결하기 위해서는 하나의 비디오를 여러 포맷으로 인코딩 해둬야 한다.
* 모바일 단말의 경우 네트워크 상황이 수시로 변경될 수 있으므로, 비디오가 끊김없이 재생되도록 하기 위해서는 비디오 화질을 여러 개로 하여 자동 혹은 수동으로 변경할 수 있게 해야한다.

> 현재 우리가 가진 서버가 CPU 성능이 좋은 대신 RAM이 상대적으로 부족한 서버와 CPU 성능이 부족한 대신 RAM이 많은 서버 두 종류가 있을때, 트랜스코딩 서버로 어떤 서버가 적합할까요? 그리고 그 선택에 대한 이유를 알려주세요.
* CPU 성능이 좋은 서버를 트랜스코딩 서버로 사용하는 것이 좋을 것이다. 트랜스코딩은 연산이 많이 필요한 작업이기 때문에 비디오나 오디오의 디지털 형식으로 변환하거나 압축하는 과정에서 많은 연산이 필요하다.

</details>
<br>

> CDN이 무엇이고, 사용하는 이유에 대해서 설명해주실수 있나요?

* 현재 비디오 스트리밍 서비스에 CDN을 도입하여 사용하고 있습니다. CDN에 대한 비용 문제에 대해서 최대한 비용을 절감하고 싶은데 어떤 방법들이 있을까요?
* 비디오 업로드 과정에서 좀 더 속도를 최적화하고 싶다면 어떤 방법을 할 수 있을까요?

<details>
<summary><h4>해설</h4></summary>

> CDN이 무엇이고, 사용하는 이유에 대해서 설명해 주실 수 있나요?
* CDN은 Content Delivery Network의 약자로, 물리적으로 떨어져 있는 사용자에게 컨텐츠를 더 빠르게 제공하기 위해 고안된 기술이다. 
* 서버를 분산해두고 캐싱해서 사용자의 컨텐츠 요청이 들어오면 사용자와 가장 가까운 위치에 존재하는 서버로 매핑시켜 요청된 컨텐츠의 캐싱된 내용을 내어준다.
* CDN을 사용함으로써 페이지 로드 시간을 단축하거나, 컨텐츠의 가용성을 높일 수 있고, 대역폭 비용을 절감시킬 수 있다.

> 현재 비디오 스트리밍 서비스에 CDN을 도입하여 사용하고 있습니다. CDN에 대한 비용 문제에 대해서 최대한 비용을 절감하고 싶은데 어떤 방법들이 있을까요?
* 콘텐츠 인기도, 이용 패턴, 비디오 크기 등의 데이터에 근거하여 최적화할 수 있을 것이다. 따라서 최적화를 시도하기 전 시청 패턴을 분석하는 것이 중요하다.
* 인기 비디오는 CDN을 통해 재생하되 다른 비디오는 비디오 서버를 통해 재생하도록 한다.
* 인기가 별로 없는 비디오는 인코딩 할 필요가 없을 수도 있다. 짧은 비디오라면 필요할 때 인코딩하여 재생하도록 한다.
* 특정 지역에서 인기가 많은 비디오는, 해당 지역의 CDN에 옮겨놓는다.

> 비디오 업로드 과정에서 좀 더 속도를 최적화하고 싶다면 어떤 방법을 할 수 있을까요?
* 하나의 비디오를 여러 개의 GoP(Group of Picture)로 나누고, 분할한 GOP를 병렬적으로 업로드하는 방법이 있다.
* 또 다른 방법으로 업로드 센터를 지역적으로 여러 곳에 둬서 업로드 성능을 개선할 수 있다.

</details>
