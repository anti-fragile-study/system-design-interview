# Ch09. 웹 크롤러 설계

### 웹 크롤링 시 DFS 대신 BFS를 사용하는 이유는 무엇일까요?
* 기존 표준 BFS로 크롤링할 때의 문제점은 무엇이고, 어떤 요소가 더 고려되어야 할까요?
* 큐를 이용해 크롤링 우선순위를 제어할 수 있는 시스템 설계를 제시해 주세요. 

<details>
<summary><h4>해설</h4></summary>

> 웹 크롤링 시 DFS 대신 BFS를 사용하는 이유는 무엇일까요?
* 일반적으로 웹사이트는 크기가 너무 거대하기 때문에, DFS로 탐색하는 경우 깊이를 가늠할 수 없기 때문에 BFS로 수행하는 것이 더 적절합니다.

> 기존 표준 BFS로 크롤링할 때의 문제점은 무엇이고, 어떤 요소가 더 고려되어야 할까요?
* 표준 BFS 알고리즘은 처리 순서에 있어 모든 페이지를 공평하게 대합니다. 
* 하지만 웹 크롤러는 웹 페이지의 품질, 업데이트 빈도 등 어려 기준에 따라 처리 순서를 다르게 해야 하고, 이러한 고민이 반영되지 않았습니다.

> 큐를 이용해 크롤링 우선순위를 제어할 수 있는 시스템 설계를 제시해 주세요.
* 순위결정장치가 URL들을 입력받아 우선순위를 결정한 후, 우선순위별로 할당된 큐 중 알맞은 큐에 작업을 push합니다.
* 큐 선택기에서 우선순위가 높은 큐에서 작업을 더 자주 꺼내도록 하여 작업을 수행합니다.

</details>


<br>

### 웹 크롤러 성능을 최적화할 수 있는 방법으로는 어떤 것들이 있을까요?

* 크롤링에 실패한 작업은 어떻게 처리할 수 있을까요?

<details>
<summary><h4>해설</h4></summary>

> 웹 크롤러 성능을 최적화할 수 있는 방법으로는 어떤 것들이 있을까요?
* 다중 서버로 분산 처리하는 방법, DNS응답을 캐시하는 방법, 서버 지역별로 분산하는 방법, 타임아웃을 짧게 가져가는 방법 등이 있습니다.

> 크롤링에 실패한 작업(Timeout, 5XX error)은 어떻게 처리할 수 있을까요?
* 큐에 작업을 저장할 때 해당 URL에 요청을 몇 번 시도했는지 표시합니다.
* 요청에 실패할 때 마다, 큐 선택기에서 retry 값에 따라 한 단계씩 우선순위가 낮은 큐에 삽입하도록 하여 성능에 방해가 되지 않도록 합니다.
* `MAX_RETRY` 값을 넘기는 경우 관리자에게 알림을 보내거나 로그를 남겨 확인할 수 있도록 합니다.
</details>
