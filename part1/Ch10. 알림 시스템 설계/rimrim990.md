# Ch10. 알림 시스템 설계

### 사용자에게 이메일 알림을 전송하는 서버가 존재한다. 해당 서버가 알림 전송을 위한 API를 제공할 때, API 호출을 위한 바디 데이터를 설계하시오.

* 이메일 알림 시스템은 수백만의 사용자에게 비슷한 형식의 이메일을 전송해야 한다. 이때, 중복적인 작업을 제거하고 처리 속도를 향상시킬 수 있는 방법에는 무엇이 있는가? 
* 이메일 알림은 지연될 수 있지만, 손실되어서는 안 된다. 이메일 알림 데이터의 안전성을 확보하기 위한 방안에는 무엇이 있는가?

<details>
<summary><h4>해설</h4></summary>

> 사용자에게 이메일 알림을 전송하는 서버가 존재한다. 해당 서버가 알림 전송을 위한 API를 제공할 때, API 호출을 위한 바디 데이터를 설계하시오.
* 이메일을 받을 사용자 식별자, 이메일 전송자의 메일 주소, 이메일 제목, 이메일 내용 등이 포함될 수 있다.

> 이메일 알림 시스템은 수백만의 사용자에게 비슷한 형식의 이메일을 전송해야 한다. 이때, 중복적인 작업을 제거하고 처리 속도를 향상시킬 수 있는 방법에는 무엇이 있는가?
* 이메일 전송을 위한 템플릿을 미리 생성 후, 캐시에 저장한다.

> 이메일 알림은 지연될 수 있지만, 손실되어서는 안 된다. 이메일 알림 데이터의 안전성을 확보하기 위한 방안에는 무엇이 있는가?
* 사용자에게 알림을 전송하기 전, 알림 전송 로그를 데이터베이스에 저장한다. 만약 알림 전송이 실패할 경우 재전송 해준다.
</details>


<br>

### 사용자에게 알림을 전송하기 위한 알림 시스템을 설계해보자. 알림 서버는 사용자의 정보를 저장하고 있어야 한다. 어떤 저장소에, 어떤 정보를 저장해야 하는가? 

* 알림 유형별로 별도의 푸시 알림 큐를 구축해 알림 시스템을 설계하였다. 이러한 시스템의 장점은 무엇인가?
* 해당 시스템 (분산 환경에서 운영되는 알림 시스템)이 안정성을 확보하기 위해 고려해야 할 사항은 무엇인가?

<details>
<summary><h4>해설</h4></summary>

> 사용자에게 알림을 전송하기 위한 알림 시스템을 설계해보자. 알림 서버는 사용자의 정보를 저장하고 있어야 한다. 어떤 저장소에, 어떤 정보를 저장해야 하는가?
* 영구적으로 데이터를 저장하기 위해 디스크를 저장소로 사용해야 한다. 또한 알림 전송을 위해 사용자의 이메일 주소나 전화번호, 단말기 정보를 저장하고 있어야 한다.

> 알림 유형별로 별도의 푸시 알림 큐를 구축해 알림 시스템을 설계하였다. 이러한 시스템의 장점은 무엇인가?
* 알림 유형별로 메시지 큐를 사용할 경우, 알림을 병렬적으로 처리할 수 있게 된다.
* 또한 특정 제 3자 서비스에서 장애가 나더라도, 다른 종류의 알림은 정상 동작할 수 있다.

> 해당 시스템이 안정성을 확보하기 위해 고려해야 할 사항은 무엇인가?
* 알림이 손실되었을 때 재전송 가능해야 한다
* 동일한 알림이 중복적으로 전송되지 않아야 한다
</details>
