# Ch10. 알림 시스템 설계

### 알림 전송 시스템을 설계할 때, 알림 시스템을 하나의 서버로만 구현하면 발생할 수 있는 문제점은 무엇인가?

* 말한 문제점을 보완할 수 있는 방법은?
* 보완한 방법을 포함해 알림 시스템을 대략적으로 설계하면 알림을 전송하는 과정은 어떻게 되는가?

<details>
<summary><h4>해설</h4></summary>

> 알림 전송 시스템을 설계할 때, 알림 시스템을 하나의 서버로만 구현하면 발생할 수 있는 문제점은 무엇인가?
* SPOF, 규모 확장성, 성능 병목 등

> 말한 문제점을 보완할 수 있는 방법은?
* 알람 서버를 증설하고, 데이터베이스와 캐시를 해당 서버에서 분리한다.
* 메세지 큐를 이용해 시스템 컴포넌트 사이의 강한 결합을 끊는다.

> 보완한 방법을 포함해 알림 시스템을 대략적으로 설계하면 알림을 전송하는 과정은 어떻게 되는가?
1. API를 호출하여 알림 서버로 알림을 보낸다.
2. 알림 서버는 사용자 정보, 단말 토큰, 알림 설정 같은 메타데이터(metada-ta)를 캐시나 데이터베이스에서 가져온다.
3. 알림 서버는 전송할 알림에 맞는 이벤트를 만들어서 해당 이벤트를 한 큐에 넣는다. 가령 iOS 푸시 알림 이벤트는 iOS 푸시 알림 큐에 넣어야 한다.
4. 작업 서버는 메시지 큐에서 알림 이벤트를 꺼낸다.
5. 작업 서버는 알림을 제3자 서비스로 보낸다.
6. 제3자 서비스는 사용자 단말로 알림을 전송한다.

</details>

<br>

### 분산 환경에서 알림 시스템을 설계할 때 안정성을 확보해야 한다. 이 안정성은 구체적으로 무엇을 의미하는가?

* 이러한 안정성을 확보하기 위해 할 수 있는 추가적 설계는 무엇인가?

<details>
<summary><h4>해설</h4></summary>

> 분산 환경에서 알림 시스템을 설계할 때 안정성을 확보해야 한다. 이 안정성은 구체적으로 무엇을 의미하는가?
* 데이터 손실 방지, 알림 중복 전송 방지 등

> 이러한 안정성을 확보하기 위해 할 수 있는 추가적 설계는 무엇인가?
* 데이터 손실 방지: 알림 로그 데이터베이스 추가, 전송 실패 혹은 유실을 대비한 재시도 메커니즘 구현
* 알림 중복 전송 방지: 이벤트 ID 추가
</details>
