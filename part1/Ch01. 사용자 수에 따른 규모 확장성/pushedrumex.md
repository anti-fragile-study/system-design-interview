# Ch01. 사용자 수에 따른 규모 확장성

> 웹 앱, db 등이 모두 한 서버에 있는 단일 서버일 경우 어떤 문제가 발생할 수 있을까요?

* 웹 서버와 db 서버를 분리하면 어떤 장점과 단점이 있을까요?
* NoSQL 이 RDB 보다 낮은 Latency 를 가지는 이유는 무엇일까요? 항상 그런 것일까요?

<details>
<summary><h4>해설</h4></summary>

> 웹 앱, db 등이 모두 한 서버에 있는 단일 서버일 경우 어떤 문제가 발생할 수 있을까요?
* SPOF(Single Point Of Failure) 가 발생할 수 있습니다. 즉, 단일 서버에 장애가 발생하면 웹 서비스 전체가 중단됩니다. 또한, 사용자의 수가 증가할 경우 웹 서버나 db 서버 등을 독립적으로 확장하기에 어려움이 있습니다.

> 웹 서버와 db 서버를 분리하면 어떤 장점과 단점이 있을까요?
* 웹 서버와 db 서버가 각각 독립적으로 확장할 수 있다는 장점이 있습니다. 또한, 웹 서버와 db 서버의 역할이 분리되어 서로의 성능에 영향을 미치지 않습니다. 하지만, 웹 서버와 db 서버가 분리되면서 추가적인 네트워크 통신이 발생하므로 Latency 가 발생할 수 있습니다. 

> Nosql 이 RDB 보다 낮은 Latency 를 가지는 이유는 무엇일까요? 항상 그런 것일까요?
* Nosql은 유여한 스키마를 지원하므로 쿼리를 처리할 때 join 이나 제약 조건 확인 과정이 없어 낮은 Latency 를 갖습니다. 하지만 Nosql 이 항상 RDB 보다 낮은 Latency 를 갖는 것은 아닙니다. 간단한 쿼리이고 제약 조건이 없을 경우 RDB 가 더 나은 성능을 낼 수도 있습니다.
</details>


<br>

> db 의 master-slave 구조에 대해 설명해주세요.

* master-slave 방식으로 db 를 구성한다고 가정한다면 동기화 전략을 어떻게 세울 것인가요?
* 만약 쓰기 연산이 읽기 연산보다 많은 서비스일 경우 master-slave를 사용하지 않는게 이득일까요?

<details>
<summary><h4>해설</h4></summary>

> db 의 master-slave 구조에 대해 설명해주세요.
* master-slave 방식은 db 서버를 여러대 구성하여 하나의 서버를 master 로 설정하고 나머지 서버를 slave 로 설정하는 방식입니다. master 서버에 쓰기 연산을 하고 slave 서버에 읽기 연산을 합니다. master 서버에 장애가 발생하면 slave 서버 중 하나를 master 로 승격시킵니다.
> master-slave 방식으로 db 를 구성한다고 가정한다면 동기화 전략을 어떻게 세울 것인가요?
* 비지니스 요구사항에 따라 전략이 달라질 것 같습니다. 만약 가용성 보단 일관성을 유지하는 것이 중요하다면 동기적으로 복제하는 전략을 세울 것 같고, 일관성 보단 가용성을 유지하는 것이 중요하다면 비동기적으로 복제하는 전략을 세울 것 같습니다. 
> 만약 쓰기 연산이 읽기 연산보다 많은 서비스일 경우 master-slave 를 사용하지 않는게 이득일까요?
* 쓰기 연산이 읽기 연산보다 많다면 동기화의 부담으로 인한 일관성이 낮아지더라도, master 수를 slave 보다 많이 두어 쓰기 연산을 분산시킬 것 같습니다.

</details>


<br>

> 캐시를 사용하는 이유와 어떤 데이터를 캐시하면 좋은지 생각나는대로 말씀해주세요.
* 캐시를 사용할 경우, db 와 마찬가지로 동시성 문제가 발생할텐데 레디스를 사용했다면 동시성 문제를 어떻게 해결할 것인가요?
* 데이터 쓰기 요청 발생 시 캐시와 db 를 업데이트 한다고 가정하자. 트랜잭션이 커밋될 때 문제가 생겨 db는 롤백 되었지만 사용하는 캐시는 롤백기능이 없어 롤백되지 않는 상황이 발생한다. 이러한 상황을 어떻게 방지할 것인가?

<details>
<summary><h4>해설</h4></summary>

> 캐시를 사용하는 이유와 어떤 데이터를 캐시하면 좋은지 생각나는대로 말씀해주세요.
* 캐시를 사용하면 자주 참조되는 데이터를 빠르게 처리할 수 있습니다. 자주 갱신되지 않으면서 참조는 많이 발생하는 데이터를 캐시하는 것이 좋습니다.
> 캐시를 사용할 경우, db 와 마찬가지로 동시성 문제가 발생할텐데 레디스를 사용했다면 동시성 문제를 어떻게 해결할 것인가요?
* 분산락을 사용하여 동시성 문제를 해결할 것 같습니다.
> 데이터 쓰기 요청 발생 시 캐시와 db 를 업데이트 한다고 가정하자. 트랜잭션이 커밋될 때 문제가 생겨 db는 롤백 되었지만 사용하는 캐시는 롤백기능이 없어 롤백되지 않는 상황이 발생한다. 이러한 상황을 어떻게 방지할 것인가?
* db 에 데이터를 갱신하는 트랜잭션이 성공적으로 커밋된 후 캐시 데이터를 갱신할 것 같습니다. 만약 캐시 데이터 갱신에 실패할 경우 해당 데이터가 속한 캐시된 데이터들을 모두 삭제하여 추후 db 에서 직접 데이터를 조회하도록 할 것 같습니다.
</details>


<br>
