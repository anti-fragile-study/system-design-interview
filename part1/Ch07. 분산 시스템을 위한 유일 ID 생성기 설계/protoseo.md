# Ch07. 분산 시스템을 위한 유일 ID 생성기 설계

> 분산 시스템 환경에서 데이터베이스의 PK를 생성할 때, Auto increment 속성을 사용하면 발생할 수 있는 문제점은 어떤 것들이 있을까요?

* 그렇다면, 이런 문제들이 발생하지 않게 PK를 설정하기 위해 ID 생성기를 설계한다고 할 때, 어떤 방법들이 있을까요?
* UUID를 활용해서 ID 생성기를 설계하는 경우의 장단점은 어떤 것이 있을까요?

<details>
<summary><h4>해설</h4></summary>

> 분산 시스템환경에서 데이터베이스의 PK를 생성할 때, Auto increment 속성을 사용하면 발생할 수 있는 문제점은 어떤 것들이 있을까요?
* 각자의 노드에서 동기화 없이 각자의 시퀀스를 증가시키면, 중복된 키 값을 가지는 데이터가 생성될 수 있다. 이는 데이터의 무결성을 깰수 있다.
* 

> 그렇다면, 이런 문제들이 발생하지 않게 PK를 설정하기 위해 ID 생성기를 설계한다고 할 때, 어떤 방법들이 있을까요?
* 데이터베이스의 다중 마스터 복제와 UUID를 사용하는 방법, 티켓 서버, 스노플레이크 등등의 방법이 있다.

> UUID를 활용해서 ID 생성기를 설계하는 경우의 장단점은 어떤 것이 있을까요?
* 장점으로 UUID는 서버 간 조율 없이 독립적으로 생성가능하므로 규모 확장이 쉽다. 단점으로는 ID가 128비트로 길어서 저장공간을 좀 더 할애해야 한다는 것과, 시간순으로 정렬할 수 없다.

</details>
<br>

> 스노플레이크 ID 생성 기법이 무엇이고 어떻게 구성되어 있는지 알려줄 수 있나요?

* 스노플레이크 ID 생성 기법의 장단점은 무엇이 있을까요?

<details>
<summary><h4>해설</h4></summary>

> 스노플레이크 ID 생성 기법이 무엇이고 어떻게 구성되어 있는지 알려줄 수 있나요?
* 트위터에서 개발한 ID 생성 기법으로 분산 시스템에서 고유성을 보장하면서 쉽게 확장 가능한 ID를 생성하기 위해 설계되었다. ID의 구조를 여러 절로 분할하여 구성하는데, 부호 비트와 타임 스탬프, 시스템을 구분하기 위한 데이터 센터 ID, 서버 ID, 그리고 시퀀스 번호로 이뤄진다.

> 스노플레이크 ID 생성 기법의 장단점은 무엇이 있을까요?
* 장점으로는 시간을 첫 번쨰 구성요소로 사용하여 정렬 가능한 상태를 유지할 수 있다. 또한 쉽게 규모를 확장할 수 있다. 단점으로는 시스템 아키텍처적으로 복잡성이 높아질 수 있고, 데이터 센터 ID나 서버 ID를 잘못 변경하게 되면 ID 충돌이 발생할 수 있다.

</details>
