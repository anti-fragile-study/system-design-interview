# Ch11. 뉴스 피드 시스템 설계

> 팬아웃 서비스에서 쓰기 시점에 팬아웃하는 모델과 읽기 시점에 팬아웃하는 모델에 대해서 각각 어떻게 동작하는지 설명해주세요.

* 우리 시스템이 현재 컴퓨팅 자원이 부족한 상황이라면 어떤 모델이 좀 더 잘 어울릴까요?
* 읽기 시점에 팬아웃하는 모델과, 쓰기 시점에 팬아웃하는 모델의 장점만 취해서 사용하고 싶은 경우, 어떻게 장점만 취해볼 수 있을까요?

<details>
<summary><h4>해설</h4></summary>

> 팬아웃 서비스에서 쓰기 시점에 팬아웃하는 모델과 읽기 시점에 팬아웃하는 모델에 대해서 각각 어떻게 동작하는지 설명해주세요.
* 쓰기 시점에 팬아웃 하는 모델은 새로운 포스팅을 기록하는 시점에 뉴스 피드를 갱신하게 된다. 포스팅이 완료되면 바로 해당 사용자의 캐시에 해당 포스팅을 기록한다.
* 읽기 시점에 팬아웃 하는 모델은 피드를 읽어야 하는 시점에 뉴스 피드를 갱긴한다. 사용자가 본인 폼헤이지나 타임라인을 로딩하는 시점에 새로운 포스트를 가져오게 된다.

> 우리 시스템이 현재 컴퓨팅 자원이 부족한 상황이라서, 컴퓨팅 자원을 최대한 아끼고 싶은데 어떤 모델이 좀 더 잘 어울릴까요?
* 읽기 시점에 팬아웃하는 모델을 사용할 수 있다. 쓰기 시점에 팬아웃하는 모델은 서비스를 자주 이용하지 않는 사용자의 피드까지 갱신하므로 컴퓨팅 자원이 낭비된다.

> 읽기 시점에 팬아웃하는 모델과, 쓰기 시점에 팬아웃하는 모델의 장점만 취해서 사용하고 싶은 경우, 어떻게 장점만 취해볼 수 있을까요?
* 뉴스 피드를 빠르게 가져오는 것은 중요하기 때문에 대부분의 사용자에 대해서는 푸시 모델을 사용하고, 친구나 팔로어가 많은 사용자의 경우에 팔로어로 하여금 해당 사용자의 포스팅을 필요할 때 가져가는 풀 모델을 사용하여 시스템 과부하를 방지한다.

</details>
<br>

> 그래프 데이터베이스에 대해서 알고 게시다면 그래프 데이터베이스에 대해서 설명해주실 수 있나요? 

* 그래프 데이터베이스를 팬아웃 서비스에 적용해야 한다면 어떤 부분에 적용해볼 수 있을까요?
* 관계형 데이터베이스로도 친구 관계, 친구 추천 서비스를 만들 수도 있을 것 같은데, 그래프 데이터베이스를 사용해야 하는 이유가 있을까요?

<details>
<summary><h4>해설</h4></summary>

> 그래프 데이터베이스에 대해서 알고 게시다면 그래프 데이터베이스에 대해서 설명해주실 수 있나요?
* 그래프 데이터베이스는 NoSQL의 한 종류로, 노드, 엣지, 프로퍼티와 함께 그래프 구조를 사용하여 데이터를 표현하고 저장하는 데이터베이스이다. 즉, 그래프 데이터베이스는 데이터를 엔터티와 관계의 네트워크로 저장한다고 할 수 있다.

> 그래프 데이터베이스를 팬아웃 서비스에 적용해야 한다면 어떤 부분에 적용해볼 수 있을까요?
* 데이터가 노드와 엣지로 구성되어 표현할 수 있고 그 관계로부터 의미 있는 데이터를 만들어 낼 수 있기 때문에, 친구 서비스에 적용하여 친구 관계나 친구 추천을 하기에 적합할 수 있다.

> 관계형 데이터베이스로도 친구 관계, 친구 추천 서비스를 만들 수도 있을 것 같은데, 그래프 데이터베이스를 사용해야 하는 이유가 있을까요?
* 친구 관계는 복잡한 관계를 그래프 기반으로 데이터를 좀 더 세밀하게 조회할 수 있어야 하므로 컬럼 기반의 참조키 형태를 가지는 관계형 데이터베이스에서는 그래프 구조를 표현하고 쿼리하는 한계가 있을 수 있다.
* 친구 관계는 실시간으로 계속해서 변화하고, 이를 분석하고 반영해야 할 수 있다. 그래프 데이터베이스는 실시간 그래프 업데이트와 쿼리에 최적화되어 있어서 이러한 요구 사항을 처리하기에 적합하다.

</details>
